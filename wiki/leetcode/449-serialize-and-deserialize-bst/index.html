<!doctype html><html lang=en><head><meta charset=utf-8><meta name=generator content="Hugo 0.147.7"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content><meta property="og:url" content="https://booiris.space/wiki/leetcode/449-serialize-and-deserialize-bst/"><link rel=canonical href=https://booiris.space/wiki/leetcode/449-serialize-and-deserialize-bst/><link rel=apple-touch-icon href=/avatar.svg><link rel=icon href=/avatar.svg><link rel=shortcut href=/avatar.svg><link rel=alternate type=application/atom+xml href=https://booiris.space/index.xml title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/booiris.space\/"},"articleSection":"wiki","name":"449-Serialize and Deserialize BST","headline":"449-Serialize and Deserialize BST","description":"题意 将一个搜索树序列化为字符串，然后将字符串反序列化为一棵树。\n序列化： 按照自己的规则将一组数据结构用字符串表示。\n题解 没看到是搜索树，直接用层序遍历序列化，记录每一层的节点数据，空节点用特殊字符表示即可。\n#define LOCAL #include \u0026lt;bits\/stdc\u002b\u002b.h\u0026gt; using namespace std; #define INF 0x3f3f3f3f typedef long long ll; \/** * Definition for a binary tree node. * struct TreeNode { * int val; * TreeNode *left; * TreeNode *right; * TreeNode(int x) : val(x), left(NULL), right(NULL) {} * }; *\/ class Codec { public: \/\/ Encodes a tree to a single string. string serialize(TreeNode *root) { if (root == nullptr) return \u0026#34;\u0026#34;; string res = \u0026#34;\u0026#34;; queue\u0026lt;pair\u0026lt;TreeNode *, char\u0026gt;\u0026gt; q; q.emplace(root, \u0026#39;N\u0026#39;); while (!q.empty()) { int len = q.size(); while (len--) { auto qf = q.front(); q.pop(); auto now = qf.first; if (now == nullptr) { res \u002b= qf.second; continue; } stringstream ss; ss \u0026lt;\u0026lt; now-\u0026gt;val; string temp; ss \u0026gt;\u0026gt; temp; res \u002b= temp \u002b qf.second; if (now-\u0026gt;left != nullptr) q.emplace(now-\u0026gt;left, \u0026#39;L\u0026#39;); else q.emplace(nullptr, \u0026#39;#\u0026#39;); if (now-\u0026gt;right != nullptr) q.emplace(now-\u0026gt;right, \u0026#39;R\u0026#39;); else q.emplace(nullptr, \u0026#39;%\u0026#39;); } res \u002b= \u0026#39;$\u0026#39;; } return res; } \/\/ Decodes your encoded data to tree. TreeNode *deserialize(string data) { \/\/ cout\u0026lt;\u0026lt;data\u0026lt;\u0026lt;\u0026#34;\\n\u0026#34;; if (data == \u0026#34;\u0026#34;) return nullptr; int index = 0; string temp = \u0026#34;\u0026#34;; while (data[index] \u0026gt;= \u0026#39;0\u0026#39; \u0026amp;\u0026amp; data[index] \u0026lt;= \u0026#39;9\u0026#39;) { temp \u002b= data[index]; index\u002b\u002b; } index\u002b\u002b; stringstream tt; tt \u0026lt;\u0026lt; temp; int root_v; tt \u0026gt;\u0026gt; root_v; TreeNode *root = new TreeNode(root_v); queue\u0026lt;TreeNode *\u0026gt; q; q.emplace(nullptr); q.emplace(root); TreeNode *now = root; while (index \u0026lt; data.size()) { if (data[index] == \u0026#39;$\u0026#39;) { while (!q.empty() \u0026amp;\u0026amp; q.front() != nullptr) { q.pop(); } q.pop(); q.emplace(nullptr); index\u002b\u002b; continue; } else if (data[index] == \u0026#39;#\u0026#39;) { index\u002b\u002b; continue; } else if (data[index] == \u0026#39;%\u0026#39;) { index\u002b\u002b; q.pop(); continue; } string temp = \u0026#34;\u0026#34;; while (data[index] \u0026gt;= \u0026#39;0\u0026#39; \u0026amp;\u0026amp; data[index] \u0026lt;= \u0026#39;9\u0026#39;) { temp \u002b= data[index]; index\u002b\u002b; } int now_val; stringstream ss; ss \u0026lt;\u0026lt; temp; ss \u0026gt;\u0026gt; now_val; if (data[index] == \u0026#39;L\u0026#39;) { q.front()-\u0026gt;left = new TreeNode(now_val); q.emplace(q.front()-\u0026gt;left); } else { q.front()-\u0026gt;right = new TreeNode(now_val); q.emplace(q.front()-\u0026gt;right); q.pop(); } index\u002b\u002b; } return root; } }; \/\/ Your Codec object will be instantiated and called as such: \/\/ Codec* ser = new Codec(); \/\/ Codec* deser = new Codec(); \/\/ string tree = ser-\u0026gt;serialize(root); \/\/ TreeNode* ans = deser-\u0026gt;deserialize(tree); \/\/ return ans; #ifdef LOCAL int main() { ios::sync_with_stdio(false); cin.tie(0); } #endif ","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2022","datePublished":"2022-05-11 17:54:53 \u002b0000 UTC","dateModified":"2022-05-11 17:54:53 \u002b0000 UTC","url":"https:\/\/booiris.space\/wiki\/leetcode\/449-serialize-and-deserialize-bst\/","keywords":["树"]}</script><title>449-Serialize and Deserialize BST</title><meta property="og:title" content="449-Serialize and Deserialize BST"><meta property="og:type" content="article"><meta property="og:description" content="题意 将一个搜索树序列化为字符串，然后将字符串反序列化为一棵树。
序列化： 按照自己的规则将一组数据结构用字符串表示。
题解 没看到是搜索树，直接用层序遍历序列化，记录每一层的节点数据，空节点用特殊字符表示即可。
#define LOCAL #include <bits/stdc++.h> using namespace std; #define INF 0x3f3f3f3f typedef long long ll; /** * Definition for a binary tree node. * struct TreeNode { * int val; * TreeNode *left; * TreeNode *right; * TreeNode(int x) : val(x), left(NULL), right(NULL) {} * }; */ class Codec { public: // Encodes a tree to a single string. string serialize(TreeNode *root) { if (root == nullptr) return &#34;&#34;; string res = &#34;&#34;; queue<pair<TreeNode *, char>> q; q.emplace(root, 'N'); while (!q.empty()) { int len = q.size(); while (len--) { auto qf = q.front(); q.pop(); auto now = qf.first; if (now == nullptr) { res += qf.second; continue; } stringstream ss; ss << now->val; string temp; ss >> temp; res += temp + qf.second; if (now->left != nullptr) q.emplace(now->left, 'L'); else q.emplace(nullptr, '#'); if (now->right != nullptr) q.emplace(now->right, 'R'); else q.emplace(nullptr, '%'); } res += '$'; } return res; } // Decodes your encoded data to tree. TreeNode *deserialize(string data) { // cout<<data<<&#34;\n&#34;; if (data == &#34;&#34;) return nullptr; int index = 0; string temp = &#34;&#34;; while (data[index] >= '0' && data[index] <= '9') { temp += data[index]; index++; } index++; stringstream tt; tt << temp; int root_v; tt >> root_v; TreeNode *root = new TreeNode(root_v); queue<TreeNode *> q; q.emplace(nullptr); q.emplace(root); TreeNode *now = root; while (index < data.size()) { if (data[index] == '$') { while (!q.empty() && q.front() != nullptr) { q.pop(); } q.pop(); q.emplace(nullptr); index++; continue; } else if (data[index] == '#') { index++; continue; } else if (data[index] == '%') { index++; q.pop(); continue; } string temp = &#34;&#34;; while (data[index] >= '0' && data[index] <= '9') { temp += data[index]; index++; } int now_val; stringstream ss; ss << temp; ss >> now_val; if (data[index] == 'L') { q.front()->left = new TreeNode(now_val); q.emplace(q.front()->left); } else { q.front()->right = new TreeNode(now_val); q.emplace(q.front()->right); q.pop(); } index++; } return root; } }; // Your Codec object will be instantiated and called as such: // Codec* ser = new Codec(); // Codec* deser = new Codec(); // string tree = ser->serialize(root); // TreeNode* ans = deser->deserialize(tree); // return ans; #ifdef LOCAL int main() { ios::sync_with_stdio(false); cin.tie(0); } #endif "><meta name=description content="题意 将一个搜索树序列化为字符串，然后将字符串反序列化为一棵树。
序列化： 按照自己的规则将一组数据结构用字符串表示。
题解 没看到是搜索树，直接用层序遍历序列化，记录每一层的节点数据，空节点用特殊字符表示即可。
#define LOCAL #include <bits/stdc++.h> using namespace std; #define INF 0x3f3f3f3f typedef long long ll; /** * Definition for a binary tree node. * struct TreeNode { * int val; * TreeNode *left; * TreeNode *right; * TreeNode(int x) : val(x), left(NULL), right(NULL) {} * }; */ class Codec { public: // Encodes a tree to a single string. string serialize(TreeNode *root) { if (root == nullptr) return &#34;&#34;; string res = &#34;&#34;; queue<pair<TreeNode *, char>> q; q.emplace(root, 'N'); while (!q.empty()) { int len = q.size(); while (len--) { auto qf = q.front(); q.pop(); auto now = qf.first; if (now == nullptr) { res += qf.second; continue; } stringstream ss; ss << now->val; string temp; ss >> temp; res += temp + qf.second; if (now->left != nullptr) q.emplace(now->left, 'L'); else q.emplace(nullptr, '#'); if (now->right != nullptr) q.emplace(now->right, 'R'); else q.emplace(nullptr, '%'); } res += '$'; } return res; } // Decodes your encoded data to tree. TreeNode *deserialize(string data) { // cout<<data<<&#34;\n&#34;; if (data == &#34;&#34;) return nullptr; int index = 0; string temp = &#34;&#34;; while (data[index] >= '0' && data[index] <= '9') { temp += data[index]; index++; } index++; stringstream tt; tt << temp; int root_v; tt >> root_v; TreeNode *root = new TreeNode(root_v); queue<TreeNode *> q; q.emplace(nullptr); q.emplace(root); TreeNode *now = root; while (index < data.size()) { if (data[index] == '$') { while (!q.empty() && q.front() != nullptr) { q.pop(); } q.pop(); q.emplace(nullptr); index++; continue; } else if (data[index] == '#') { index++; continue; } else if (data[index] == '%') { index++; q.pop(); continue; } string temp = &#34;&#34;; while (data[index] >= '0' && data[index] <= '9') { temp += data[index]; index++; } int now_val; stringstream ss; ss << temp; ss >> now_val; if (data[index] == 'L') { q.front()->left = new TreeNode(now_val); q.emplace(q.front()->left); } else { q.front()->right = new TreeNode(now_val); q.emplace(q.front()->right); q.pop(); } index++; } return root; } }; // Your Codec object will be instantiated and called as such: // Codec* ser = new Codec(); // Codec* deser = new Codec(); // string tree = ser->serialize(root); // TreeNode* ans = deser->deserialize(tree); // return ans; #ifdef LOCAL int main() { ios::sync_with_stdio(false); cin.tie(0); } #endif "><meta property="og:locale" content="cn"><meta property="og:image" content="/avatar.svg"><link rel=stylesheet href=/css/index.min.css><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.min.css><link href=/%20index.xml rel=alternate type=application/rss+xml title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Bree+Serif|Bungee+Shade" rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css></head><body><article class="post 简体中文" id=article><div class=row><div class=col-xs-12><div class=site-header><header><div class=header-title><a href=/>HELLO WORLD</a></div><div class=header-subtitle>Live long and prosper.</div></header><div class="row end-md header-items"><div class=header-item><a href=/about target=_blank>About</a></div><div class=header-item><a href=https://github.com/booiris target=_blank>Github</a></div><div class=header-item><a href=/memos target=_blank>Memos</a></div></div><div class=row></div><div class=header-line></div></div><header class=post-header><h1 class=post-title>449-Serialize and Deserialize BST</h1></header><div class="post-content markdown-body"><h2 id=题意>题意</h2><p>将一个搜索树序列化为字符串，然后将字符串反序列化为一棵树。</p><p>序列化： 按照自己的规则将一组数据结构用字符串表示。</p><h2 id=题解>题解</h2><p>没看到是搜索树，直接用层序遍历序列化，记录每一层的节点数据，空节点用特殊字符表示即可。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#57606a>#define LOCAL
</span></span></span><span style=display:flex><span><span style=color:#57606a>#include</span> <span style=color:#57606a>&lt;bits/stdc++.h&gt;</span><span style=color:#57606a>
</span></span></span><span style=display:flex><span><span style=color:#57606a></span><span style=color:#cf222e>using</span> <span style=color:#cf222e>namespace</span> std<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#define INF 0x3f3f3f3f
</span></span></span><span style=display:flex><span><span style=color:#57606a></span><span style=color:#cf222e>typedef</span> <span style=color:#cf222e>long</span> <span style=color:#cf222e>long</span> ll<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>/**
</span></span></span><span style=display:flex><span><span style=color:#57606a> * Definition for a binary tree node.
</span></span></span><span style=display:flex><span><span style=color:#57606a> * struct TreeNode {
</span></span></span><span style=display:flex><span><span style=color:#57606a> *     int val;
</span></span></span><span style=display:flex><span><span style=color:#57606a> *     TreeNode *left;
</span></span></span><span style=display:flex><span><span style=color:#57606a> *     TreeNode *right;
</span></span></span><span style=display:flex><span><span style=color:#57606a> *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
</span></span></span><span style=display:flex><span><span style=color:#57606a> * };
</span></span></span><span style=display:flex><span><span style=color:#57606a> */</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>class</span> <span style=color:#1f2328>Codec</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>public</span><span style=color:#0550ae>:</span>
</span></span><span style=display:flex><span>    <span style=color:#57606a>// Encodes a tree to a single string.
</span></span></span><span style=display:flex><span><span style=color:#57606a></span>    string serialize<span style=color:#1f2328>(</span>TreeNode <span style=color:#0550ae>*</span>root<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>root <span style=color:#0550ae>==</span> <span style=color:#cf222e>nullptr</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>return</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        string res <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        queue<span style=color:#0550ae>&lt;</span>pair<span style=color:#0550ae>&lt;</span>TreeNode <span style=color:#0550ae>*</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>char</span><span style=color:#0550ae>&gt;&gt;</span> q<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span>root<span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;N&#39;</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span>q<span style=color:#1f2328>.</span>empty<span style=color:#1f2328>())</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>int</span> len <span style=color:#0550ae>=</span> q<span style=color:#1f2328>.</span>size<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span>len<span style=color:#0550ae>--</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>auto</span> qf <span style=color:#0550ae>=</span> q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>pop<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>auto</span> now <span style=color:#0550ae>=</span> qf<span style=color:#1f2328>.</span>first<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>now <span style=color:#0550ae>==</span> <span style=color:#cf222e>nullptr</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                    res <span style=color:#0550ae>+=</span> qf<span style=color:#1f2328>.</span>second<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#cf222e>continue</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                stringstream ss<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                ss <span style=color:#0550ae>&lt;&lt;</span> now<span style=color:#0550ae>-&gt;</span>val<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                string temp<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                ss <span style=color:#0550ae>&gt;&gt;</span> temp<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                res <span style=color:#0550ae>+=</span> temp <span style=color:#0550ae>+</span> qf<span style=color:#1f2328>.</span>second<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>now<span style=color:#0550ae>-&gt;</span>left <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nullptr</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>                    q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span>now<span style=color:#0550ae>-&gt;</span>left<span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;L&#39;</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>                    q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span><span style=color:#cf222e>nullptr</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;#&#39;</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>now<span style=color:#0550ae>-&gt;</span>right <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nullptr</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>                    q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span>now<span style=color:#0550ae>-&gt;</span>right<span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;R&#39;</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>                    q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span><span style=color:#cf222e>nullptr</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;%&#39;</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>            res <span style=color:#0550ae>+=</span> <span style=color:#0a3069>&#39;$&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>return</span> res<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#57606a>// Decodes your encoded data to tree.
</span></span></span><span style=display:flex><span><span style=color:#57606a></span>    TreeNode <span style=color:#0550ae>*</span><span style=color:#6639ba>deserialize</span><span style=color:#1f2328>(</span>string data<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>        <span style=color:#57606a>// cout&lt;&lt;data&lt;&lt;&#34;\n&#34;;
</span></span></span><span style=display:flex><span><span style=color:#57606a></span>        <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>data <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>return</span> <span style=color:#cf222e>nullptr</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>int</span> index <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        string temp <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span>data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>&gt;=</span> <span style=color:#0a3069>&#39;0&#39;</span> <span style=color:#0550ae>&amp;&amp;</span> data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>&lt;=</span> <span style=color:#0a3069>&#39;9&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>            temp <span style=color:#0550ae>+=</span> data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>            index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>        index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        stringstream tt<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        tt <span style=color:#0550ae>&lt;&lt;</span> temp<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>int</span> root_v<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        tt <span style=color:#0550ae>&gt;&gt;</span> root_v<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        TreeNode <span style=color:#0550ae>*</span>root <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> TreeNode<span style=color:#1f2328>(</span>root_v<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>        queue<span style=color:#0550ae>&lt;</span>TreeNode <span style=color:#0550ae>*&gt;</span> q<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span><span style=color:#cf222e>nullptr</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>        q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span>root<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>        TreeNode <span style=color:#0550ae>*</span>now <span style=color:#0550ae>=</span> root<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span>index <span style=color:#0550ae>&lt;</span> data<span style=color:#1f2328>.</span>size<span style=color:#1f2328>())</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#39;$&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span>q<span style=color:#1f2328>.</span>empty<span style=color:#1f2328>()</span> <span style=color:#0550ae>&amp;&amp;</span> q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>()</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nullptr</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                    q<span style=color:#1f2328>.</span>pop<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>                <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>pop<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span><span style=color:#cf222e>nullptr</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>continue</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#39;#&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>continue</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#39;%&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>pop<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>continue</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>            string temp <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span>data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>&gt;=</span> <span style=color:#0a3069>&#39;0&#39;</span> <span style=color:#0550ae>&amp;&amp;</span> data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>&lt;=</span> <span style=color:#0a3069>&#39;9&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                temp <span style=color:#0550ae>+=</span> data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>                index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>int</span> now_val<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            stringstream ss<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            ss <span style=color:#0550ae>&lt;&lt;</span> temp<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>            ss <span style=color:#0550ae>&gt;&gt;</span> now_val<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>data<span style=color:#1f2328>[</span>index<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#39;L&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>()</span><span style=color:#0550ae>-&gt;</span>left <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> TreeNode<span style=color:#1f2328>(</span>now_val<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span>q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>()</span><span style=color:#0550ae>-&gt;</span>left<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>()</span><span style=color:#0550ae>-&gt;</span>right <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> TreeNode<span style=color:#1f2328>(</span>now_val<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>emplace<span style=color:#1f2328>(</span>q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>()</span><span style=color:#0550ae>-&gt;</span>right<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>                q<span style=color:#1f2328>.</span>pop<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>            <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>            index<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>return</span> root<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>// Your Codec object will be instantiated and called as such:
</span></span></span><span style=display:flex><span><span style=color:#57606a>// Codec* ser = new Codec();
</span></span></span><span style=display:flex><span><span style=color:#57606a>// Codec* deser = new Codec();
</span></span></span><span style=display:flex><span><span style=color:#57606a>// string tree = ser-&gt;serialize(root);
</span></span></span><span style=display:flex><span><span style=color:#57606a>// TreeNode* ans = deser-&gt;deserialize(tree);
</span></span></span><span style=display:flex><span><span style=color:#57606a>// return ans;
</span></span></span><span style=display:flex><span><span style=color:#57606a></span><span style=color:#57606a>#ifdef LOCAL
</span></span></span><span style=display:flex><span><span style=color:#57606a></span><span style=color:#cf222e>int</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    ios<span style=color:#0550ae>::</span>sync_with_stdio<span style=color:#1f2328>(</span><span style=color:#6639ba>false</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    cin<span style=color:#1f2328>.</span>tie<span style=color:#1f2328>(</span><span style=color:#0550ae>0</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#endif
</span></span></span></code></pre></div></div><div class="row middle-xs"><div class=col-xs-12><div class=post-tags><a href=/tags/%E6%A0%91/>树</a></div></div></div><div class=site-footer></div></div></div></article><script src=/js/lazyload.min.js></script><script>var lazyImage=new LazyLoad({container:document.getElementById("article")})</script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script></body></html>