<!doctype html><html lang=en><head><meta charset=utf-8><meta name=generator content="Hugo 0.147.7"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content><meta property="og:url" content="https://booiris.space/wiki/leetcode/827.-making-a-large-island/"><link rel=canonical href=https://booiris.space/wiki/leetcode/827.-making-a-large-island/><link rel=apple-touch-icon href=/avatar.svg><link rel=icon href=/avatar.svg><link rel=shortcut href=/avatar.svg><link rel=alternate type=application/atom+xml href=https://booiris.space/index.xml title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/booiris.space\/"},"articleSection":"wiki","name":"827. Making A Large Island","headline":"827. Making A Large Island","description":"题意 给你一个大小为n x n二进制矩阵 grid 。最多只能将一格0变成1 。\n返回执行此操作后，grid 中最大的岛屿面积是多少？\n岛屿由一组上、下、左、右四个方向相连的 1 形成。\n题解 首先 dfs 染色，得到每个颜色的格子数量。然后枚举整个地图，对于每一个点，遍历它的上下左右的点所在的颜色区域，最后求和得到相连的区域大小。\n#![allow(dead_code, unused_imports, unused_macros)] use std::cmp::*; use std::collections::*; use std::ops::Bound::*; #[cfg(feature = \u0026#34;local\u0026#34;)] struct Solution; macro_rules! hashmap { ($( $key: expr =\u0026gt; $val: expr ),*) =\u0026gt; {{ let mut map = ::std::collections::HashMap::new(); $( map.insert($key, $val); )* map }} } const DIR: [[i32; 2]; 4] = [[0, 1], [1, 0], [-1, 0], [0, -1]]; fn dfs( color: \u0026amp;mut Vec\u0026lt;Vec\u0026lt;i32\u0026gt;\u0026gt;, vis: \u0026amp;mut Vec\u0026lt;Vec\u0026lt;bool\u0026gt;\u0026gt;, cnt: \u0026amp;mut HashMap\u0026lt;i32, i32\u0026gt;, grid: \u0026amp;Vec\u0026lt;Vec\u0026lt;i32\u0026gt;\u0026gt;, p: (usize, usize), nowc: i32, ) { color[p.0][p.1] = nowc; vis[p.0][p.1] = true; cnt.entry(nowc).and_modify(|c| *c \u002b= 1).or_insert(1); let n = grid.len() as i32; for x in DIR { let nx = p.0 as i32 \u002b x[0]; let ny = p.1 as i32 \u002b x[1]; if nx \u0026gt;= 0 \u0026amp;\u0026amp; nx \u0026lt; n \u0026amp;\u0026amp; ny \u0026gt;= 0 \u0026amp;\u0026amp; ny \u0026lt; n \u0026amp;\u0026amp; !vis[nx as usize][ny as usize] \u0026amp;\u0026amp; grid[nx as usize][ny as usize] == 1 { dfs(color, vis, cnt, grid, (nx as usize, ny as usize), nowc); } } } impl Solution { pub fn largest_island(grid: Vec\u0026lt;Vec\u0026lt;i32\u0026gt;\u0026gt;) -\u0026gt; i32 { let mut cnt = HashMap::\u0026lt;i32, i32\u0026gt;::new(); cnt.insert(0, 0); let mut res = 0; let mut color = vec![vec![0; grid[0].len()]; grid.len()]; let mut vis = vec![vec![false; grid[0].len()]; grid.len()]; let mut now = 1; let n = grid.len() as i32; for i in 0..grid.len() { for j in 0..grid.len() { if grid[i][j] == 1 \u0026amp;\u0026amp; !vis[i][j] { dfs(\u0026amp;mut color, \u0026amp;mut vis, \u0026amp;mut cnt, \u0026amp;grid, (i, j), now); now \u002b= 1; } } } for i in 0..grid.len() { for j in 0..grid.len() { let mut temp = HashSet::new(); for d in DIR { let nx = i as i32 \u002b d[0]; let ny = j as i32 \u002b d[1]; if nx \u0026gt;= 0 \u0026amp;\u0026amp; nx \u0026lt; n \u0026amp;\u0026amp; ny \u0026gt;= 0 \u0026amp;\u0026amp; ny \u0026lt; n { temp.insert(color[nx as usize][ny as usize]); } } let mut sum = 0; if grid[i][j] == 0 { sum = 1; } for x in \u0026amp;temp { sum \u002b= cnt.get(x).unwrap(); } res = max(res, sum); } } res } } #[cfg(feature = \u0026#34;local\u0026#34;)] pub fn main() { let a = vec![vec![0, 0], vec![1, 0]]; println!(\u0026#34;res:{}\u0026#34;, Solution::largest_island(a)); } ","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2022","datePublished":"2022-09-18 21:57:09 \u002b0000 UTC","dateModified":"2022-09-18 21:57:09 \u002b0000 UTC","url":"https:\/\/booiris.space\/wiki\/leetcode\/827.-making-a-large-island\/","keywords":[]}</script><title>827. Making A Large Island</title><meta property="og:title" content="827. Making A Large Island"><meta property="og:type" content="article"><meta property="og:description" content='题意 给你一个大小为n x n二进制矩阵 grid 。最多只能将一格0变成1 。
返回执行此操作后，grid 中最大的岛屿面积是多少？
岛屿由一组上、下、左、右四个方向相连的 1 形成。
题解 首先 dfs 染色，得到每个颜色的格子数量。然后枚举整个地图，对于每一个点，遍历它的上下左右的点所在的颜色区域，最后求和得到相连的区域大小。
#![allow(dead_code, unused_imports, unused_macros)] use std::cmp::*; use std::collections::*; use std::ops::Bound::*; #[cfg(feature = "local")] struct Solution; macro_rules! hashmap { ($( $key: expr => $val: expr ),*) => {{ let mut map = ::std::collections::HashMap::new(); $( map.insert($key, $val); )* map }} } const DIR: [[i32; 2]; 4] = [[0, 1], [1, 0], [-1, 0], [0, -1]]; fn dfs( color: &amp;mut Vec<Vec<i32>>, vis: &amp;mut Vec<Vec<bool>>, cnt: &amp;mut HashMap<i32, i32>, grid: &amp;Vec<Vec<i32>>, p: (usize, usize), nowc: i32, ) { color[p.0][p.1] = nowc; vis[p.0][p.1] = true; cnt.entry(nowc).and_modify(|c| *c += 1).or_insert(1); let n = grid.len() as i32; for x in DIR { let nx = p.0 as i32 + x[0]; let ny = p.1 as i32 + x[1]; if nx >= 0 && nx < n && ny >= 0 && ny < n && !vis[nx as usize][ny as usize] && grid[nx as usize][ny as usize] == 1 { dfs(color, vis, cnt, grid, (nx as usize, ny as usize), nowc); } } } impl Solution { pub fn largest_island(grid: Vec<Vec<i32>>) -> i32 { let mut cnt = HashMap::<i32, i32>::new(); cnt.insert(0, 0); let mut res = 0; let mut color = vec![vec![0; grid[0].len()]; grid.len()]; let mut vis = vec![vec![false; grid[0].len()]; grid.len()]; let mut now = 1; let n = grid.len() as i32; for i in 0..grid.len() { for j in 0..grid.len() { if grid[i][j] == 1 && !vis[i][j] { dfs(&amp;mut color, &amp;mut vis, &amp;mut cnt, &amp;grid, (i, j), now); now += 1; } } } for i in 0..grid.len() { for j in 0..grid.len() { let mut temp = HashSet::new(); for d in DIR { let nx = i as i32 + d[0]; let ny = j as i32 + d[1]; if nx >= 0 && nx < n && ny >= 0 && ny < n { temp.insert(color[nx as usize][ny as usize]); } } let mut sum = 0; if grid[i][j] == 0 { sum = 1; } for x in &amp;temp { sum += cnt.get(x).unwrap(); } res = max(res, sum); } } res } } #[cfg(feature = "local")] pub fn main() { let a = vec![vec![0, 0], vec![1, 0]]; println!("res:{}", Solution::largest_island(a)); } '><meta name=description content='题意 给你一个大小为n x n二进制矩阵 grid 。最多只能将一格0变成1 。
返回执行此操作后，grid 中最大的岛屿面积是多少？
岛屿由一组上、下、左、右四个方向相连的 1 形成。
题解 首先 dfs 染色，得到每个颜色的格子数量。然后枚举整个地图，对于每一个点，遍历它的上下左右的点所在的颜色区域，最后求和得到相连的区域大小。
#![allow(dead_code, unused_imports, unused_macros)] use std::cmp::*; use std::collections::*; use std::ops::Bound::*; #[cfg(feature = "local")] struct Solution; macro_rules! hashmap { ($( $key: expr => $val: expr ),*) => {{ let mut map = ::std::collections::HashMap::new(); $( map.insert($key, $val); )* map }} } const DIR: [[i32; 2]; 4] = [[0, 1], [1, 0], [-1, 0], [0, -1]]; fn dfs( color: &amp;mut Vec<Vec<i32>>, vis: &amp;mut Vec<Vec<bool>>, cnt: &amp;mut HashMap<i32, i32>, grid: &amp;Vec<Vec<i32>>, p: (usize, usize), nowc: i32, ) { color[p.0][p.1] = nowc; vis[p.0][p.1] = true; cnt.entry(nowc).and_modify(|c| *c += 1).or_insert(1); let n = grid.len() as i32; for x in DIR { let nx = p.0 as i32 + x[0]; let ny = p.1 as i32 + x[1]; if nx >= 0 && nx < n && ny >= 0 && ny < n && !vis[nx as usize][ny as usize] && grid[nx as usize][ny as usize] == 1 { dfs(color, vis, cnt, grid, (nx as usize, ny as usize), nowc); } } } impl Solution { pub fn largest_island(grid: Vec<Vec<i32>>) -> i32 { let mut cnt = HashMap::<i32, i32>::new(); cnt.insert(0, 0); let mut res = 0; let mut color = vec![vec![0; grid[0].len()]; grid.len()]; let mut vis = vec![vec![false; grid[0].len()]; grid.len()]; let mut now = 1; let n = grid.len() as i32; for i in 0..grid.len() { for j in 0..grid.len() { if grid[i][j] == 1 && !vis[i][j] { dfs(&amp;mut color, &amp;mut vis, &amp;mut cnt, &amp;grid, (i, j), now); now += 1; } } } for i in 0..grid.len() { for j in 0..grid.len() { let mut temp = HashSet::new(); for d in DIR { let nx = i as i32 + d[0]; let ny = j as i32 + d[1]; if nx >= 0 && nx < n && ny >= 0 && ny < n { temp.insert(color[nx as usize][ny as usize]); } } let mut sum = 0; if grid[i][j] == 0 { sum = 1; } for x in &amp;temp { sum += cnt.get(x).unwrap(); } res = max(res, sum); } } res } } #[cfg(feature = "local")] pub fn main() { let a = vec![vec![0, 0], vec![1, 0]]; println!("res:{}", Solution::largest_island(a)); } '><meta property="og:locale" content="cn"><meta property="og:image" content="/avatar.svg"><link rel=stylesheet href=/css/index.min.css><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.min.css><link href=/%20index.xml rel=alternate type=application/rss+xml title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Bree+Serif|Bungee+Shade" rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css></head><body><article class="post 简体中文" id=article><div class=row><div class=col-xs-12><div class=site-header><header><div class=header-title><a href=/>HELLO WORLD</a></div><div class=header-subtitle>Live long and prosper.</div></header><div class="row end-md header-items"><div class=header-item><a href=/about>About</a></div><div class=header-item><a href=https://github.com/booiris>Github</a></div><div class=header-item><a href=/memos>Memos</a></div></div><div class=row></div><div class=header-line></div></div><header class=post-header><h1 class=post-title>827. Making A Large Island</h1></header><div class="post-content markdown-body"><h2 id=题意>题意</h2><p>给你一个大小为<code>n x n</code>二进制矩阵 <code>grid</code> 。<strong>最多</strong>只能将一格<code>0</code>变成<code>1</code> 。</p><p>返回执行此操作后，grid 中最大的岛屿面积是多少？</p><p>岛屿由一组上、下、左、右四个方向相连的<code> 1 </code>形成。</p><h2 id=题解>题解</h2><p>首先 dfs 染色，得到每个颜色的格子数量。然后枚举整个地图，对于每一个点，遍历它的上下左右的点所在的颜色区域，最后求和得到相连的区域大小。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#57606a>#![allow(dead_code, unused_imports, unused_macros)]</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>use</span><span style=color:#fff> </span>std::cmp::<span style=color:#0550ae>*</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>use</span><span style=color:#fff> </span>std::collections::<span style=color:#0550ae>*</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>use</span><span style=color:#fff> </span>std::ops::Bound::<span style=color:#0550ae>*</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#57606a>#[cfg(feature = </span><span style=color:#0a3069>&#34;local&#34;</span><span style=color:#57606a>)]</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>struct</span> <span style=color:#1f2328>Solution</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span>macro_rules<span style=color:#0550ae>!</span><span style=color:#fff> </span>hashmap<span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>(</span><span style=color:#57606a>$(</span><span style=color:#fff> </span><span style=color:#57606a>$key</span>: <span style=color:#1f2328>expr</span><span style=color:#fff> </span><span style=color:#0550ae>=&gt;</span><span style=color:#fff> </span><span style=color:#57606a>$val</span>: <span style=color:#1f2328>expr</span><span style=color:#fff> </span><span style=color:#1f2328>),</span><span style=color:#0550ae>*</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#0550ae>=&gt;</span><span style=color:#fff> </span><span style=color:#1f2328>{{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>         </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>map<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>::std::collections::HashMap::new<span style=color:#1f2328>();</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>         </span><span style=color:#57606a>$(</span><span style=color:#fff> </span>map<span style=color:#1f2328>.</span>insert<span style=color:#1f2328>(</span><span style=color:#57606a>$key</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#57606a>$val</span><span style=color:#1f2328>);</span><span style=color:#fff> </span><span style=color:#1f2328>)</span><span style=color:#0550ae>*</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>         </span>map<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>const</span><span style=color:#fff> </span><span style=color:#0550ae>DIR</span>: <span style=color:#1f2328>[[</span><span style=color:#cf222e>i32</span><span style=color:#1f2328>;</span><span style=color:#fff> </span><span style=color:#0550ae>2</span><span style=color:#1f2328>];</span><span style=color:#fff> </span><span style=color:#0550ae>4</span><span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#1f2328>[[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#1f2328>],</span><span style=color:#fff> </span><span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>],</span><span style=color:#fff> </span><span style=color:#1f2328>[</span><span style=color:#0550ae>-</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>],</span><span style=color:#fff> </span><span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>-</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>fn</span> <span style=color:#6639ba>dfs</span><span style=color:#1f2328>(</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>color: <span style=color:#cf222e>&amp;</span><span style=color:#1f2328>mut</span><span style=color:#fff> </span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#cf222e>i32</span><span style=color:#0550ae>&gt;&gt;</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>vis: <span style=color:#cf222e>&amp;</span><span style=color:#1f2328>mut</span><span style=color:#fff> </span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#cf222e>bool</span><span style=color:#0550ae>&gt;&gt;</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>cnt: <span style=color:#cf222e>&amp;</span><span style=color:#1f2328>mut</span><span style=color:#fff> </span>HashMap<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>i32</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#0550ae>&gt;</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>grid: <span style=color:#cf222e>&amp;</span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#cf222e>i32</span><span style=color:#0550ae>&gt;&gt;</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>p: <span style=color:#1f2328>(</span><span style=color:#cf222e>usize</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>),</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>nowc: <span style=color:#cf222e>i32</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>color<span style=color:#1f2328>[</span>p<span style=color:#1f2328>.</span><span style=color:#0550ae>0</span><span style=color:#1f2328>][</span>p<span style=color:#1f2328>.</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>nowc<span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>vis<span style=color:#1f2328>[</span>p<span style=color:#1f2328>.</span><span style=color:#0550ae>0</span><span style=color:#1f2328>][</span>p<span style=color:#1f2328>.</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#cf222e>true</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span>cnt<span style=color:#1f2328>.</span>entry<span style=color:#1f2328>(</span>nowc<span style=color:#1f2328>).</span>and_modify<span style=color:#1f2328>(</span><span style=color:#0550ae>|</span>c<span style=color:#0550ae>|</span><span style=color:#fff> </span><span style=color:#0550ae>*</span>c<span style=color:#fff> </span><span style=color:#0550ae>+=</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#1f2328>).</span>or_insert<span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>);</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>n<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>x<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>DIR</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>nx<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>p<span style=color:#1f2328>.</span><span style=color:#0550ae>0</span><span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#fff> </span><span style=color:#0550ae>+</span><span style=color:#fff> </span>x<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>p<span style=color:#1f2328>.</span><span style=color:#0550ae>1</span><span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#fff> </span><span style=color:#0550ae>+</span><span style=color:#fff> </span>x<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>if</span><span style=color:#fff> </span>nx<span style=color:#fff> </span><span style=color:#0550ae>&gt;=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>nx<span style=color:#fff> </span><span style=color:#0550ae>&lt;</span><span style=color:#fff> </span>n<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#0550ae>&gt;=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#0550ae>&lt;</span><span style=color:#fff> </span>n<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span><span style=color:#0550ae>!</span>vis<span style=color:#1f2328>[</span>nx<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>][</span>ny<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>]</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>grid<span style=color:#1f2328>[</span>nx<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>][</span>ny<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#0550ae>==</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span>dfs<span style=color:#1f2328>(</span>color<span style=color:#1f2328>,</span><span style=color:#fff> </span>vis<span style=color:#1f2328>,</span><span style=color:#fff> </span>cnt<span style=color:#1f2328>,</span><span style=color:#fff> </span>grid<span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>(</span>nx<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>,</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>),</span><span style=color:#fff> </span>nowc<span style=color:#1f2328>);</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>impl</span><span style=color:#fff> </span>Solution<span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>pub</span><span style=color:#fff> </span><span style=color:#cf222e>fn</span> <span style=color:#6639ba>largest_island</span><span style=color:#1f2328>(</span>grid: <span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#6639ba>Vec</span><span style=color:#0550ae>&lt;</span><span style=color:#cf222e>i32</span><span style=color:#0550ae>&gt;&gt;</span><span style=color:#1f2328>)</span><span style=color:#fff> </span>-&gt; <span style=color:#cf222e>i32</span> <span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>cnt<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>HashMap::<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>i32</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#0550ae>&gt;</span>::new<span style=color:#1f2328>();</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span>cnt<span style=color:#1f2328>.</span>insert<span style=color:#1f2328>(</span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>);</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>res<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>color<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>;</span><span style=color:#fff> </span>grid<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>].</span>len<span style=color:#1f2328>()];</span><span style=color:#fff> </span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>vis<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#cf222e>false</span><span style=color:#1f2328>;</span><span style=color:#fff> </span>grid<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>].</span>len<span style=color:#1f2328>()];</span><span style=color:#fff> </span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>now<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>n<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>i<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#0550ae>..</span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>j<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#0550ae>..</span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#cf222e>if</span><span style=color:#fff> </span>grid<span style=color:#1f2328>[</span>i<span style=color:#1f2328>][</span>j<span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#0550ae>==</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span><span style=color:#0550ae>!</span>vis<span style=color:#1f2328>[</span>i<span style=color:#1f2328>][</span>j<span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span>dfs<span style=color:#1f2328>(</span><span style=color:#0550ae>&amp;</span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>color<span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;</span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>vis<span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;</span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>cnt<span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;</span>grid<span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span><span style=color:#fff> </span>j<span style=color:#1f2328>),</span><span style=color:#fff> </span>now<span style=color:#1f2328>);</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span>now<span style=color:#fff> </span><span style=color:#0550ae>+=</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>i<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#0550ae>..</span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>j<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#0550ae>..</span>grid<span style=color:#1f2328>.</span>len<span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>temp<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>HashSet::new<span style=color:#1f2328>();</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>d<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>DIR</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>nx<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>i<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#fff> </span><span style=color:#0550ae>+</span><span style=color:#fff> </span>d<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>j<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>i32</span><span style=color:#fff> </span><span style=color:#0550ae>+</span><span style=color:#fff> </span>d<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span><span style=color:#cf222e>if</span><span style=color:#fff> </span>nx<span style=color:#fff> </span><span style=color:#0550ae>&gt;=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>nx<span style=color:#fff> </span><span style=color:#0550ae>&lt;</span><span style=color:#fff> </span>n<span style=color:#fff> </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#0550ae>&gt;=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;&amp;</span><span style=color:#fff> </span>ny<span style=color:#fff> </span><span style=color:#0550ae>&lt;</span><span style=color:#fff> </span>n<span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                        </span>temp<span style=color:#1f2328>.</span>insert<span style=color:#1f2328>(</span>color<span style=color:#1f2328>[</span>nx<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>][</span>ny<span style=color:#fff> </span><span style=color:#cf222e>as</span><span style=color:#fff> </span><span style=color:#cf222e>usize</span><span style=color:#1f2328>]);</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#cf222e>let</span><span style=color:#fff> </span><span style=color:#cf222e>mut</span><span style=color:#fff> </span>sum<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#cf222e>if</span><span style=color:#fff> </span>grid<span style=color:#1f2328>[</span>i<span style=color:#1f2328>][</span>j<span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#0550ae>==</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span>sum<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#0550ae>1</span><span style=color:#1f2328>;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#cf222e>for</span><span style=color:#fff> </span>x<span style=color:#fff> </span><span style=color:#cf222e>in</span><span style=color:#fff> </span><span style=color:#0550ae>&amp;</span>temp<span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                    </span>sum<span style=color:#fff> </span><span style=color:#0550ae>+=</span><span style=color:#fff> </span>cnt<span style=color:#1f2328>.</span>get<span style=color:#1f2328>(</span>x<span style=color:#1f2328>).</span>unwrap<span style=color:#1f2328>();</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>                </span>res<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span>max<span style=color:#1f2328>(</span>res<span style=color:#1f2328>,</span><span style=color:#fff> </span>sum<span style=color:#1f2328>);</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>            </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span>res<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#57606a>#[cfg(feature = </span><span style=color:#0a3069>&#34;local&#34;</span><span style=color:#57606a>)]</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#cf222e>pub</span><span style=color:#fff> </span><span style=color:#cf222e>fn</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>let</span><span style=color:#fff> </span>a<span style=color:#fff> </span><span style=color:#0550ae>=</span><span style=color:#fff> </span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>],</span><span style=color:#fff> </span><span style=color:#6639ba>vec!</span><span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>]];</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#6639ba>println!</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;res:</span><span style=color:#0a3069>{}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>,</span><span style=color:#fff> </span>Solution::largest_island<span style=color:#1f2328>(</span>a<span style=color:#1f2328>));</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></div></div><div class="row middle-xs"><div class=col-xs-12></div></div><div class=site-footer></div></div></div></article><script src=/js/lazyload.min.js></script><script>var lazyImage=new LazyLoad({container:document.getElementById("article")})</script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script></body></html>