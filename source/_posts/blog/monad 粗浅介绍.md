---
title: monad ç²—æµ…ä»‹ç» 
date: 2023-12-12 21:20:47 
updated: 2023-12-13 22:11:06
tags: [] 
top: false
mathjax: true
categories: [ blog ]
author: booiris
---

## ä»€ä¹ˆæ˜¯ monad?

monad(å•å­) æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ç§æŠ½è±¡ï¼Œæœ¬æ–‡æ—¨åœ¨å¯¹ monad çš„ç²—æµ…ä»‹ç»ï¼Œæ‰€ä»¥è·³è¿‡å…¶æ•°å­¦ä¸Šçš„å®šä¹‰(å…¶å®æ˜¯ç›®å‰ç¬”è€…ä¹Ÿä¸å¤ªæ‡‚ğŸ¤«)ï¼Œé€šè¿‡ä¸€äº›å…·ä½“çš„ä¾‹å­è¯´æ˜å®ƒçš„æ¦‚å¿µå’Œä½œç”¨ã€‚

### å®šä¹‰

å°½ç®¡æ²¡æœ‰å¤ªå¤æ‚çš„æ•°å­¦æ¦‚å¿µï¼Œä½†è¿˜æ˜¯éœ€è¦ä¸€ä¸ªå®šä¹‰è¯´æ˜ä»€ä¹ˆæ ·çš„ä¸œè¥¿æ‰èƒ½ç§°ä¹‹ä¸º monadã€‚åœ¨ wiki çš„å®šä¹‰ä¸­:

> [Monad (functional programming) - Wikipedia](https://en.wikipedia.org/wiki/Monad_(functional_programming)#Definition)

ä¸€ä¸ª monad åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†:

1. ç±»å‹æ„é€ å™¨ `M` ï¼Œåœ¨ go ä¸­å¯ä»¥ç†è§£ä¸ºä¸€ç§åä¸º `M` åŒ…è£¹ç€ `T` çš„æ³›å‹ç»“æ„ä½“ `M<T>{ val: T }`
2. ç±»å‹è½¬æ¢å™¨ ` Unit :: T -> M T `ï¼Œåœ¨ go ä¸­å¯ä»¥ç†è§£ä¸ºç”±å€¼ `T` æ„é€  `M` çš„å‡½æ•° `func Unit[T any](val T) -> M<T>`
3. ç»„åˆå™¨ `FlatMap :: M T -> ( T -> M U) -> M U` ï¼Œåœ¨ go ä¸­å¯ä»¥ç†è§£ä¸º `M<T>{ val: T }` è¿™ä¸ªç»“æ„ä½“å…·æœ‰ä¸€ä¸ªæˆå‘˜æ–¹æ³• `func flatMap[T,U any]( func(T) -> M<U> ) -> M<U>` ï¼Œèƒ½å¤Ÿæ¥å—ä¸€ä¸ªå‡½æ•°å®ç°ä» `M<T>` åˆ° `M<U>` çš„å˜æ¢ã€‚

æ›´ä¸¥æ ¼(æˆ–è€…è¯´æ›´åŠ ç¬¦åˆæ•°å­¦ä¸Šçš„å®šä¹‰)ï¼Œä¸€ä¸ª monad è¿˜å¿…é¡»æœ‰ä»¥ä¸‹ä¸‰ä¸ªå®šå¾‹(çº¦æŸ):

1. è½¬æ¢å™¨æ˜¯ç»„åˆå™¨çš„å·¦[å•ä½å…ƒ](https://en.wikipedia.org/wiki/Identity_element): Unit(x).FlatMap( f )` ç­‰ä»·äº `f(x)`
2. è½¬æ¢å™¨æ˜¯ç»„åˆå™¨çš„å³[å•ä½å…ƒ](https://en.wikipedia.org/wiki/Identity_element): M{ val: x }.FlatMap( Unit ) ç­‰ä»·äº `M< val: x >`
3. ç»„åˆå™¨æ»¡è¶³ç»“åˆå¾‹:

## monad æœ‰ä»€ä¹ˆç”¨?

### å¦ä¸€ä¸ªå®‡å®™çš„ go option

### monad å¦‚ä½•è§£å†³å›è°ƒåœ°ç‹±

### monad åœ¨æµå¼å¤„ç†ä¸­çš„åº”ç”¨

## æ€»ç»“
