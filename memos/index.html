<!doctype html><html lang=en><head><meta charset=utf-8><meta name=generator content="Hugo 0.147.7"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content><meta property="og:url" content="https://booiris.space/memos/"><link rel=canonical href=https://booiris.space/memos/><link rel=apple-touch-icon href=/avatar.svg><link rel=icon href=/avatar.svg><link rel=shortcut href=/avatar.svg><link rel=alternate type=application/atom+xml href=https://booiris.space/index.xml title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/booiris.space\/"},"articleSection":"","name":"","headline":"","description":"\u003c!DOCTYPE html\u003e get memos failed\n","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"0001","datePublished":"0001-01-01 00:00:00 \u002b0000 UTC","dateModified":"0001-01-01 00:00:00 \u002b0000 UTC","url":"https:\/\/booiris.space\/memos\/","keywords":[]}</script><title></title><meta property="og:title" content><meta property="og:type" content="article"><meta property="og:description" content="<!DOCTYPE html> get memos failed
"><meta name=description content="<!DOCTYPE html> get memos failed
"><meta property="og:locale" content="cn"><meta property="og:image" content="/avatar.svg"><link rel=stylesheet href=/css/index.min.css><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.min.css><link href=/%20index.xml rel=alternate type=application/rss+xml title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Bree+Serif|Bungee+Shade" rel=stylesheet></head><body><article class="post cn" id=article><div class=row><div class=col-xs-12><div class=site-header><header><div class=header-title><a href=/>HELLO WORLD</a></div><div class=header-subtitle>Live long and prosper.</div></header><div class="row end-md header-items"><div class=header-item><a href=/>Home</a></div><div class=header-item><a href=/about>About</a></div><div class=header-item><a href=https://github.com/booiris target=_blank>Github</a></div><div class=header-item><a href=/memos>Memos</a></div></div><div class=row></div><div class=header-line></div></div><header class=post-header><h1 class=post-title></h1></header><div class="post-content markdown-body"><!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/versions/bulma-no-dark-mode.min.css><link rel=stylesheet href=/css/index.min.css><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.min.css><script src=https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js type=application/javascript></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css><script src=https://cdn.jsdelivr.net/npm/marked/marked.min.js type=application/javascript></script><style>.markdown-content p{margin-bottom:1em}.markdown-content pre{background-color:#f5f5f5;padding:1em;border-radius:4px;overflow-x:auto}.markdown-content code{background-color:#f5f5f5;padding:.2em .4em;border-radius:3px}.markdown-content blockquote{border-left:4px solid #dbdbdb;padding-left:1em;color:#474747}.thumbnail-img{max-width:200px;max-height:200px}</style></head><body><div id=memos-container></div><div class=modal id=error-modal><div class=modal-background></div><div class=modal-content><div class="notification is-danger"><button class=delete aria-label=close></button><p id=error-message style=margin-bottom:0>get memos failed</p></div></div></div><script>const host="booirisapi.asia:8443",errorModal=document.getElementById("error-modal"),errorMessage=document.getElementById("error-message");let nextPageToken="",isLoading=!1;document.querySelector(".modal .delete").addEventListener("click",()=>{errorModal.classList.remove("is-active")}),document.querySelector(".modal-background").addEventListener("click",()=>{errorModal.classList.remove("is-active")});async function fetchMemos(e=!1){if(isLoading)return;isLoading=!0;try{const t=new URL(`https://${host}/api/v1/memos`);t.searchParams.append("pageSize","5"),e&&nextPageToken&&t.searchParams.append("pageToken",nextPageToken);const s=await fetch(t,{mode:"cors"}),n=await s.json();nextPageToken=n.nextPageToken||"",displayMemos(n,e)}catch{errorModal.classList.add("is-active")}finally{isLoading=!1}}function displayMemos(e,t=!1){const n=document.getElementById("memos-container");e&&e.memos&&(t||(n.innerHTML=""),e.memos.forEach(e=>{const t=document.createElement("div");t.className="box",t.style.boxShadow="none",t.style.border="3px solid #0A0A0A",t.style.marginBottom="1rem";const i=document.createElement("div");i.className="markdown-content",i.innerHTML=marked.parse(e.content);var s,a=[];for(let t of e.resources)t.type?.includes("image/")&&a.push(t);if(s="",a.length>0)for(let e of a)if(e.externalLink?.length>0)s+=`<a href="${e.externalLink}" data-fancybox><img class="thumbnail-img" src="${e.externalLink}"></a>`;else{const t=`https://${host}/file/${e.name}/${e.filename}`;s+=`<a href="${t}" data-fancybox><img class="thumbnail-img" src="${t}?thumbnail=1"></a>`}const r=document.createElement("div");r.className="grid is-gap-1",r.innerHTML=s;const o=document.createElement("p");o.className="is-size-6 has-text-grey",o.style.marginBottom="0",o.textContent=new Date(e.displayTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),t.appendChild(i),t.appendChild(r),t.appendChild(o),n.appendChild(t)}))}Fancybox.bind("[data-fancybox]",{}),document.addEventListener("DOMContentLoaded",()=>{fetchMemos(),window.addEventListener("scroll",()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-700&&nextPageToken&&fetchMemos(!0)})})</script></body></html></div><div class="row middle-xs"><div class=col-xs-12></div></div><div class=site-footer></div></div></div></article><script src=/js/lazyload.min.js></script><script>var lazyImage=new LazyLoad({container:document.getElementById("article")})</script></body></html>